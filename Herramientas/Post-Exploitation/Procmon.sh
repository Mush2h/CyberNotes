#!/bin/bash

# Description: This script monitors and displays changes in running processes in real-time.

# Function to handle Ctrl+C interrupt
function ctrl_c() {
    echo -e "\n\n [!] Exiting... \n"
    tput cnorm  # Restore normal cursor visibility
    exit 1
}

# Trap Ctrl+C and call the ctrl_c function
trap ctrl_c SIGINT

# Store initial process list
old_process=$(ps -eo user,command)

# Hide the cursor
tput civis

# Main loop to continuously monitor processes
while true; do 
    # Get current process list
    new_process=$(ps -eo user,command)
    
    # Compare old and new process lists, filter out common entries
    diff <(echo "$old_process") <(echo "$new_process") | grep "[\>\<]" | grep -vE "command|kworker|procmon"
    
    # Update old process list for next iteration
    old_process=$new_process
done

